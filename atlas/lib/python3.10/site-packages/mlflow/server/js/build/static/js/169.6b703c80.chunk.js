"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[169],{71109:function(e,t,s){s.d(t,{i:function(){return h}});var r=s(64819),a=(s(76998),s(94509)),n=s(86288),i=s(43513),l=s(3281),o=s(8704),d=s(51391);var p={name:"1k6747e",styles:"font-size:20px!important"};function h(e){const{title:t,forceOpen:s,showServerError:h,defaultCollapsed:c,onChange:m}=e,f=s&&{activeKey:["1"]},g=c?null:["1"],{formatMessage:x}=(0,n.A)(),{theme:b}=(0,l.a)();return(0,d.Y)(a.A,{className:"collapsible-section",css:u.wrapper,bordered:!1,...f,defaultActiveKey:g,expandIcon:e=>{let{isActive:s}=e;return(0,d.Y)(o.vKP,{"aria-label":x(s?{id:"iaomsd",defaultMessage:"collapse {title}"}:{id:"dTLq6E",defaultMessage:"expand {title}"},{title:t}),css:p,rotate:s?90:0})},onChange:m,children:(0,d.Y)(a.A.Panel,{className:"collapsible-panel",header:t,css:(0,r.AH)({"&, .ant-collapse-header, .ant-collapse-content":(0,l.p)({color:b.colors.textPrimary})},""),children:(0,d.Y)(i.g,{showServerError:h,children:e.children})},"1")})}const u={wrapper:{".collapsible-panel":{position:"relative"},'& > .collapsible-panel > [role="button"]:focus':{outline:"revert"}}};h.defaultProps={forceOpen:!1}},10411:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var r=s(76998),a=s(88743),n=s.n(a),i=s(89365),l=s(1797),o=s(5911),d=s(34139),p=s(24816),h=s(8704),u=s(64671),c=s(61661),m=(s(61602),s(81706)),f=s(49727),g=s(1442),x=s(89105),b=s(2543),y=s(36217),Y=s(33846),R=s(71146),E=s(81709),v=s(18509),w=s(71109),M=s(16936),N=s(51391);const{TabPane:D}=h.tUM;var S={name:"m4bh15",styles:"max-height:500px"},T={name:"1o6wc9k",styles:"padding-left:6px"},A={name:"1f6izsi",styles:"max-height:300px"},I={name:"m4bh15",styles:"max-height:500px"};class C extends r.Component{constructor(e){super(e),this.compareRunViewRef=void 0,this.runDetailsTableRef=void 0,this.state={tableWidth:null,onlyShowParamDiff:!1,onlyShowTagDiff:!1,onlyShowMetricDiff:!1},this.onResizeHandler=this.onResizeHandler.bind(this),this.onCompareRunTableScrollHandler=this.onCompareRunTableScrollHandler.bind(this),this.runDetailsTableRef=r.createRef(),this.compareRunViewRef=r.createRef()}onResizeHandler(e){const t=this.runDetailsTableRef.current;if(null!==t){const e=t.clientWidth;this.setState({tableWidth:e})}}onCompareRunTableScrollHandler(e){const t=this.compareRunViewRef.current.querySelectorAll(".compare-run-table");t.forEach(((s,r)=>{const a=t[r];a!==e.target&&(a.scrollLeft=e.target.scrollLeft)}))}componentDidMount(){const e=this.props.intl.formatMessage({id:"ufamzi",defaultMessage:"Comparing {runs} MLflow Runs"},{runs:this.props.runInfos.length});R.A.updatePageTitle(e),window.addEventListener("resize",this.onResizeHandler,!0),window.dispatchEvent(new Event("resize"))}componentWillUnmount(){window.removeEventListener("resize",this.onResizeHandler,!0)}getTableColumnWidth(){let e=200;return null!==this.state.tableWidth&&(e=Math.round(this.state.tableWidth/(this.props.runInfos.length+1)),e<200&&(e=200)),e}renderExperimentNameRowItems(){const{experiments:e}=this.props,t=R.A.getExperimentNameMap(R.A.sortExperimentsById(e));return this.props.runInfos.map((e=>{let{experimentId:s,runUuid:r}=e;const{name:a,basename:n}=t[s];return(0,N.Y)("td",{className:"meta-info",children:(0,N.Y)(b.N_,{to:x.h.getExperimentPageRoute(s),title:a,children:n})},r)}))}hasMultipleExperiments(){return this.props.experimentIds.length>1}shouldShowExperimentNameRow(){return this.props.hasComparedExperimentsBefore||this.hasMultipleExperiments()}getExperimentPageLink(e,t){return(0,N.Y)(b.N_,{to:x.h.getExperimentPageRoute(e),children:t})}getCompareExperimentsPageLinkText(e){return(0,N.Y)(d.A,{id:"YkcoeV",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:e}})}getCompareExperimentsPageLink(e){return(0,N.Y)(b.N_,{to:x.h.getCompareExperimentsPageRoute(e),children:this.getCompareExperimentsPageLinkText(e.length)})}getExperimentLink(){const{comparedExperimentIds:e,hasComparedExperimentsBefore:t,experimentIds:s,experiments:r}=this.props;return t?this.getCompareExperimentsPageLink(e):this.hasMultipleExperiments()?this.getCompareExperimentsPageLink(s):this.getExperimentPageLink(s[0],r[0].name)}getTitle(){return this.hasMultipleExperiments()?(0,N.Y)(d.A,{id:"IEORCP",defaultMessage:"Comparing {numRuns} Runs from {numExperiments} Experiments",values:{numRuns:this.props.runInfos.length,numExperiments:this.props.experimentIds.length}}):(0,N.Y)(d.A,{id:"NN0ScV",defaultMessage:"Comparing {numRuns} Runs from 1 Experiment",values:{numRuns:this.props.runInfos.length}})}renderParamTable(e){const t=this.renderDataRows(this.props.paramLists,e,this.state.onlyShowParamDiff,!0);return 0===t.length?(0,N.Y)("h2",{children:(0,N.Y)(d.A,{id:"lNO3kK",defaultMessage:"No parameters to display."})}):(0,N.Y)("table",{className:"table compare-table compare-run-table",css:S,onScroll:this.onCompareRunTableScrollHandler,children:(0,N.Y)("tbody",{children:t})})}renderMetricTable(e,t){const s=this.renderDataRows(this.props.metricLists,e,this.state.onlyShowMetricDiff,!1,((e,s)=>(0,N.FD)(b.N_,{to:x.h.getMetricPageRoute(this.props.runInfos.map((e=>e.runUuid)).filter(((e,t)=>void 0!==s[t])),e,t),title:"Plot chart",children:[e,(0,N.Y)("i",{className:"fas fa-chart-line",css:T})]})),R.A.formatMetric);return 0===s.length?(0,N.Y)("h2",{children:(0,N.Y)(d.A,{id:"eBGO2d",defaultMessage:"No metrics to display."})}):(0,N.Y)("table",{className:"table compare-table compare-run-table",css:A,onScroll:this.onCompareRunTableScrollHandler,children:(0,N.Y)("tbody",{children:s})})}renderTagTable(e){const t=this.renderDataRows(this.props.tagLists,e,this.state.onlyShowTagDiff,!0);return 0===t.length?(0,N.Y)("h2",{children:(0,N.Y)(d.A,{id:"m9e01X",defaultMessage:"No tags to display."})}):(0,N.Y)("table",{className:"table compare-table compare-run-table",css:I,onScroll:this.onCompareRunTableScrollHandler,children:(0,N.Y)("tbody",{children:t})})}renderTimeRows(e){const t=(0,N.Y)(d.A,{id:"Zc48NC",defaultMessage:"(unknown)"}),s=this.props.runInfos.map((e=>{const s=e.startTime,r=e.endTime;return{runUuid:e.runUuid,startTime:s?R.A.formatTimestamp(s):t,endTime:r?R.A.formatTimestamp(r):t,duration:s&&r?R.A.getDuration(s,r):t}}));return[{key:"startTime",title:(0,N.Y)(d.A,{id:"O9r1RR",defaultMessage:"Start Time:"}),data:s.map((e=>{let{runUuid:t,startTime:s}=e;return[t,s]}))},{key:"endTime",title:(0,N.Y)(d.A,{id:"G0gYkS",defaultMessage:"End Time:"}),data:s.map((e=>{let{runUuid:t,endTime:s}=e;return[t,s]}))},{key:"duration",title:(0,N.Y)(d.A,{id:"7kUi8J",defaultMessage:"Duration:"}),data:s.map((e=>{let{runUuid:t,duration:s}=e;return[t,s]}))}].map((t=>{let{key:s,title:r,data:a}=t;return(0,N.FD)("tr",{children:[(0,N.Y)("th",{scope:"row",className:"head-value sticky-header",css:e,children:r}),a.map((t=>{let[s,r]=t;return(0,N.Y)("td",{className:"data-value",css:e,children:(0,N.Y)(h.paO,{title:r,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},dangerouslySetAntdProps:{mouseEnterDelay:1},children:r})},s)}))]},s)}))}render(){const{experimentIds:e}=this.props,{runInfos:t,runNames:s,paramLists:r,metricLists:a,runUuids:n}=this.props,i=this.getTableColumnWidth(),l=this.genWidthStyle(i),o=this.getTitle();let p=[this.getExperimentLink()];const c=this.props.intl.formatMessage({id:"eOxs/C",defaultMessage:"Parameters"}),y=this.props.intl.formatMessage({id:"frPtD/",defaultMessage:"Metrics"}),Y=this.props.intl.formatMessage({id:"9KXBFn",defaultMessage:"Tags"}),R=this.props.intl.formatMessage({id:"VP+qFF",defaultMessage:"Show diff only"}),S=!(0,M.g$)();return(0,N.FD)("div",{className:"CompareRunView",ref:this.compareRunViewRef,children:[(0,N.Y)(v.z,{title:o,breadcrumbs:p}),S&&(0,N.Y)(w.i,{title:this.props.intl.formatMessage({id:"S7ESYH",defaultMessage:"Visualizations"}),children:(0,N.FD)(h.tUM,{children:[(0,N.Y)(D,{tab:(0,N.Y)(d.A,{id:"sTp/V3",defaultMessage:"Parallel Coordinates Plot"}),children:(0,N.Y)(E.Ay,{runUuids:this.props.runUuids})},"parallel-coordinates-plot"),(0,N.Y)(D,{tab:(0,N.Y)(d.A,{id:"OimAJb",defaultMessage:"Scatter Plot"}),children:(0,N.Y)(m.J,{runUuids:this.props.runUuids,runDisplayNames:this.props.runDisplayNames})},"scatter-plot"),(0,N.Y)(D,{tab:(0,N.Y)(d.A,{id:"iXb99e",defaultMessage:"Box Plot"}),children:(0,N.Y)(f.e,{runUuids:n,runInfos:t,paramLists:r,metricLists:a})},"box-plot"),(0,N.Y)(D,{tab:(0,N.Y)(d.A,{id:"B80MC6",defaultMessage:"Contour Plot"}),children:(0,N.Y)(g.A,{runUuids:this.props.runUuids,runDisplayNames:this.props.runDisplayNames})},"contour-plot")]})}),(0,N.Y)(w.i,{title:this.props.intl.formatMessage({id:"lISqyJ",defaultMessage:"Run details"}),children:(0,N.FD)("table",{className:"table compare-table compare-run-table",ref:this.runDetailsTableRef,onScroll:this.onCompareRunTableScrollHandler,children:[(0,N.Y)("thead",{children:(0,N.FD)("tr",{children:[(0,N.Y)("th",{scope:"row",className:"head-value sticky-header",css:l,children:(0,N.Y)(d.A,{id:"/2MZix",defaultMessage:"Run ID:"})}),this.props.runInfos.map((e=>{var t,s;return(0,N.Y)("th",{scope:"row",className:"data-value",css:l,children:(0,N.Y)(h.paO,{title:e.runUuid,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},mouseEnterDelay:1,children:(0,N.Y)(b.N_,{to:x.h.getRunPageRoute(null!==(t=e.experimentId)&&void 0!==t?t:"0",null!==(s=e.runUuid)&&void 0!==s?s:""),children:e.runUuid})})},e.runUuid)}))]})}),(0,N.FD)("tbody",{children:[(0,N.FD)("tr",{children:[(0,N.Y)("th",{scope:"row",className:"head-value sticky-header",css:l,children:(0,N.Y)(d.A,{id:"DUnrWL",defaultMessage:"Run Name:"})}),s.map(((e,s)=>(0,N.Y)("td",{className:"data-value",css:l,children:(0,N.Y)("div",{className:"truncate-text single-line",children:(0,N.Y)(h.paO,{title:e,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},mouseEnterDelay:1,children:e})})},t[s].runUuid)))]}),this.renderTimeRows(l),this.shouldShowExperimentNameRow()&&(0,N.FD)("tr",{children:[(0,N.Y)("th",{scope:"row",className:"data-value",children:(0,N.Y)(d.A,{id:"Qsgg+9",defaultMessage:"Experiment Name:"})}),this.renderExperimentNameRowItems()]})]})]})}),(0,N.FD)(w.i,{title:c,children:[(0,N.Y)(h.dOG,{label:R,"aria-label":[c,R].join(" - "),checked:this.state.onlyShowParamDiff,onChange:(e,t)=>this.setState({onlyShowParamDiff:e})}),(0,N.Y)(u.S,{size:"lg"}),this.renderParamTable(i)]}),(0,N.FD)(w.i,{title:y,children:[(0,N.Y)(h.dOG,{label:R,"aria-label":[y,R].join(" - "),checked:this.state.onlyShowMetricDiff,onChange:(e,t)=>this.setState({onlyShowMetricDiff:e})}),(0,N.Y)(u.S,{size:"lg"}),this.renderMetricTable(i,e)]}),(0,N.FD)(w.i,{title:Y,children:[(0,N.Y)(h.dOG,{label:R,"aria-label":[Y,R].join(" - "),checked:this.state.onlyShowTagDiff,onChange:(e,t)=>this.setState({onlyShowTagDiff:e})}),(0,N.Y)(u.S,{size:"lg"}),this.renderTagTable(i)]})]})}genWidthStyle(e){return{width:`${e}px`,minWidth:`${e}px`,maxWidth:`${e}px`}}renderDataRows(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(e,t)=>e,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e=>e;const i=Y.A.getKeys(e),l={};i.forEach((t=>l[t]={values:Array(e.length).fill(void 0)})),e.forEach(((e,t)=>{e.forEach((e=>l[e.key].values[t]=e.value))})),i.forEach((e=>{return l[e].hasDiff=(t=l[e].values).some((e=>e!==t[0]));var t}));const o=this.genWidthStyle(t);return i.filter((e=>!s||l[e].hasDiff)).map((e=>{const{values:t,hasDiff:s}=l[e],i=r&&s?"diff-row":void 0;return(0,N.FD)("tr",{className:i,children:[(0,N.Y)("th",{scope:"row",className:"head-value sticky-header",css:o,children:a(e,t)}),t.map(((e,t)=>{const s=void 0===e?"":n(e);return(0,N.Y)("td",{className:"data-value",css:o,children:(0,N.Y)(h.paO,{title:s,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},mouseEnterDelay:1,children:(0,N.Y)("span",{className:"truncate-text single-line",children:s})})},this.props.runInfos[t].runUuid)}))]},e)}))}}var k=(0,i.Ng)(((e,t)=>{const{comparedExperimentIds:s,hasComparedExperimentsBefore:r}=e.compareExperiments,a=[],n=[],i=[],l=[],o=[],d=[],{experimentIds:p,runUuids:h}=t,u=p.map((t=>(0,c._m)(t,e)));return h.forEach((t=>{const s=(0,c.K4)(t,e);a.push(s),n.push(Object.values((0,y.d0)(t,e))),i.push(Object.values((0,c.tI)(t,e)));const r=(0,c.X3)(t,e),p=R.A.getVisibleTagValues(r).map((e=>{let[t,s]=e;return{key:t,value:s}}));l.push(p),d.push(R.A.getRunDisplayName(s,t)),o.push(R.A.getRunName(s))})),{experiments:u,runInfos:a,metricLists:n,paramLists:i,tagLists:l,runNames:o,runDisplayNames:d,comparedExperimentIds:s,hasComparedExperimentsBefore:r}}))((0,p.Ay)(C)),P=s(33444),U=s(13804),L=s(2893),O=s(72066),W=s(28976);class z extends r.Component{constructor(e){super(e),this.requestIds=void 0,this.requestIds=[]}fetchExperiments(){return this.props.experimentIds.map((e=>{const t=(0,P.yk)();return this.props.dispatch((0,l.yc)(e,t)),t}))}componentDidMount(){this.requestIds.push(...this.fetchExperiments()),this.props.runUuids.forEach((e=>{const t=(0,P.yk)();this.requestIds.push(t),this.props.dispatch((0,l.aO)(e,t))}))}render(){return(0,N.Y)(U.L,{children:(0,N.Y)(o.Ay,{requestIds:this.requestIds,children:(0,N.Y)(k,{runUuids:this.props.runUuids,experimentIds:this.props.experimentIds})})})}}const F=e=>{const t=decodeURIComponent(e);return e!==t?F(t):t},H=(0,L.h)((0,i.Ng)(((e,t)=>{const{location:s}=t,r=F(s.search),a=n().parse(r),i=JSON.parse(a["?runs"]);return{experimentIds:JSON.parse(a.experiments),runUuids:i}}))(z));var V=(0,O.X)(W.A.mlflowServices.RUN_TRACKING,H)}}]);
//# sourceMappingURL=169.6b703c80.chunk.js.map